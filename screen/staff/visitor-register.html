<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SIRIN MUSEUM - ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</title>
  <link rel="stylesheet" href="../../assets/css/sidebar.css" />
  <link rel="stylesheet" href="../../assets/css/visitor-register.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <div class="dashboard-layout active">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2>SIRIN MUSEUM</h2>
        <div class="role">STAFF</div>
      </div>
      <div class="user-profile">
        <div class="profile-avatar"><i class="fas fa-user"></i></div>
        <div class="profile-name" id="profileName">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</div>
        <div class="profile-role" id="profileRole">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå</div>
        <div class="profile-time" id="sidebarLoginTime">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö: 19:52</div>
      </div>

      <ul class="nav-menu">
        <li class="nav-item"><a class="nav-link active" href="#">üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</a></li>
        <li class="nav-item"><a class="nav-link" href="register-device.html">üìü ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a></li>
        <li class="nav-item"><a class="nav-link" href="manage-device.html">üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a></li>
      </ul>
      <button class="logout-btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-header">
        <h1>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</h1>
        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</p>
      </div>

      <div class="form-container">
        <h2 style="margin-bottom: 30px; color: #2a8c78; text-align: center;">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</h2>
        
        <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô -->
        <div class="registration-type">
          <div class="type-option active" onclick="selectType('individual')">
            <div class="icon">
              <i class="fas fa-user"></i>
            </div>
            <h3>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</h3>
            <p>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏° 1 ‡∏Ñ‡∏ô<br>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p>
          </div>
          <div class="type-option" onclick="selectType('group')">
            <div class="icon">
              <i class="fas fa-users"></i>
            </div>
            <h3>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°</h3>
            <p>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°<br>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô</p>
          </div>
        </div>

        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß -->
        <div class="form-section active" id="individualForm">
          <div class="form-grid individual">
            <div class="form-group">
              <label>‡∏ä‡∏∑‡πà‡∏≠:</label>
              <input type="text" id="visitorFirstName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠">
            </div>
            <div class="form-group">
              <label>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
              <input type="text" id="visitorLastName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
            </div>
            <div class="form-group">
              <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label>
              <input type="date" id="visitorBirthdate">
              <div class="age-display" id="ageDisplay"></div>
            </div>
            <div class="form-group">
              <label>‡πÄ‡∏û‡∏®:</label>
              <select id="visitorGender">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®</option>
                <option value="male">‡∏ä‡∏≤‡∏¢</option>
                <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
                <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
              </select>
            </div>
            <div class="form-group full-width">
              <label>iBeacon Tag:</label>
              <select id="visitorBeacon">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å iBeacon</option>
                <option value="TAG001">TAG001 - ‡πÄ‡∏î‡πá‡∏Å‡∏ä‡∏≤‡∏¢ 1</option>
                <option value="TAG002">TAG002 - ‡πÄ‡∏î‡πá‡∏Å‡∏´‡∏ç‡∏¥‡∏á 1</option>
                <option value="TAG003">TAG003 - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà 1</option>
              </select>
            </div>
          </div>
          <button class="btn" onclick="addIndividualVisitor()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</button>
        </div>

        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° -->
        <div class="form-section" id="groupForm">
          <div class="form-grid group">
            <div class="form-group">
              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°:</label>
              <input type="text" id="groupName" placeholder="‡πÄ‡∏ä‡πà‡∏ô: ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà">
            </div>
            <div class="form-group">
              <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°:</label>
              <input type="number" id="groupSize" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô" min="1">
            </div>
            <div class="form-group">
              <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏•‡∏∏‡πà‡∏°:</label>
              <select id="groupType">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                <option value="student">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
                <option value="tourist">‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</option>
                <option value="family">‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</option>
                <option value="corporate">‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£/‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</option>
                <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
              </select>
            </div>
            <div class="form-group">
              <label>‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏Å‡∏•‡∏∏‡πà‡∏°:</label>
              <input type="text" id="groupLeader" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏Å‡∏•‡∏∏‡πà‡∏°">
            </div>
          </div>
          <button class="btn" onclick="addGroupVisitor()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</button>
        </div>
      </div>

      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>‡∏ä‡∏∑‡πà‡∏≠/‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
              <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
              <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
              <th>‡∏≠‡∏≤‡∏¢‡∏∏/‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</th>
              <th>‡πÄ‡∏û‡∏®</th>
              <th>iBeacon</th>
              <th>‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°</th>
              <th>‡∏≠‡∏≠‡∏Å</th>
              <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="visitorsTable">
            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    let currentType = 'individual';

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
    function selectType(type) {
      currentType = type;
      
      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
      document.querySelectorAll('.type-option').forEach(option => {
        option.classList.remove('active');
      });
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
      });
      
      if (type === 'individual') {
        document.querySelector('.type-option:first-child').classList.add('active');
        document.getElementById('individualForm').classList.add('active');
      } else {
        document.querySelector('.type-option:last-child').classList.add('active');
        document.getElementById('groupForm').classList.add('active');
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
    function calculateAge(birthDate) {
      const today = new Date();
      const birth = new Date(birthDate);
      let age = today.getFullYear() - birth.getFullYear();
      const monthDiff = today.getMonth() - birth.getMonth();

      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
        age--;
      }

      return age;
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
    document.getElementById('visitorBirthdate').addEventListener('change', function () {
      const birthDate = this.value;
      const ageDisplay = document.getElementById('ageDisplay');

      if (birthDate) {
        const age = calculateAge(birthDate);
        ageDisplay.textContent = `‡∏≠‡∏≤‡∏¢‡∏∏: ${age} ‡∏õ‡∏µ`;
        ageDisplay.style.color = '#2a8c78';
      } else {
        ageDisplay.textContent = '';
      }
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß
    function addIndividualVisitor() {
      const firstName = document.getElementById('visitorFirstName').value;
      const lastName = document.getElementById('visitorLastName').value;
      const birthDate = document.getElementById('visitorBirthdate').value;
      const gender = document.getElementById('visitorGender').value;
      const group = document.getElementById('visitorGroup').value;
      const beacon = document.getElementById('visitorBeacon').value;

      if (!firstName || !lastName || !birthDate || !gender || !beacon) {
        Swal.fire('‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô', 'warning');
        return;
      }

      const age = calculateAge(birthDate);

      const visitorData = {
        type: 'individual',
        firstName: firstName,
        lastName: lastName,
        birthDate: birthDate,
        age: age,
        gender: gender,
        group: group || '-',
        beacon: beacon,
        checkIn: new Date().toLocaleString('th-TH'),
        checkOut: '-'
      };

      console.log('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß:', visitorData);

      Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', `‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏° ${firstName} ${lastName} (‡∏≠‡∏≤‡∏¢‡∏∏ ${age} ‡∏õ‡∏µ) ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');

      // ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
      clearIndividualForm();
      loadVisitors();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°
    function addGroupVisitor() {
      const groupName = document.getElementById('groupName').value;
      const groupSize = document.getElementById('groupSize').value;
      const groupType = document.getElementById('groupType').value;
      const groupLeader = document.getElementById('groupLeader').value;
      const groupContact = document.getElementById('groupContact').value;
      const groupNote = document.getElementById('groupNote').value;

      if (!groupName || !groupSize || !groupType || !groupLeader || !groupContact) {
        Swal.fire('‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô', 'warning');
        return;
      }

      const groupData = {
        type: 'group',
        groupName: groupName,
        groupSize: parseInt(groupSize),
        groupType: groupType,
        groupLeader: groupLeader,
        groupContact: groupContact,
        groupNote: groupNote || '-',
        checkIn: new Date().toLocaleString('th-TH'),
        checkOut: '-'
      };

      console.log('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°:', groupData);

      Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', `‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° "${groupName}" ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${groupSize} ‡∏Ñ‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');

      // ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
      clearGroupForm();
      loadVisitors();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß
    function clearIndividualForm() {
      document.getElementById('visitorFirstName').value = '';
      document.getElementById('visitorLastName').value = '';
      document.getElementById('visitorBirthdate').value = '';
      document.getElementById('visitorGender').value = '';
      document.getElementById('visitorGroup').value = '';
      document.getElementById('visitorBeacon').value = '';
      document.getElementById('ageDisplay').textContent = '';
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°
    function clearGroupForm() {
      document.getElementById('groupName').value = '';
      document.getElementById('groupSize').value = '';
      document.getElementById('groupType').value = '';
      document.getElementById('groupLeader').value = '';
      document.getElementById('groupContact').value = '';
      document.getElementById('groupNote').value = '';
    }

    function editVisitor(visitorId) {
      Swal.fire('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏° ID: ${visitorId}`, 'info');
    }

    function deleteVisitor(visitorId) {
      Swal.fire({
        title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',
        text: `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏° ID: ${visitorId} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏•‡∏ö‡πÄ‡∏•‡∏¢!',
        cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire('‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß!', '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
          loadVisitors();
        }
      });
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function loadVisitors() {
      // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
      const sampleData = [
        {
          id: 1,
          type: 'individual',
          name: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
          dataType: '‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•',
          count: 1,
          ageInfo: '25 ‡∏õ‡∏µ',
          gender: '‡∏ä‡∏≤‡∏¢',
          beacon: 'TAG001',
          checkIn: '09:30',
          checkOut: '-'
        },
        {
          id: 2,
          type: 'individual',
          name: '‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
          dataType: '‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•',
          count: 1,
          ageInfo: '30 ‡∏õ‡∏µ',
          gender: '‡∏´‡∏ç‡∏¥‡∏á',
          beacon: 'TAG002',
          checkIn: '10:15',
          checkOut: '14:30'
        },
        {
          id: 3,
          type: 'group',
          name: '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà',
          dataType: '‡∏Å‡∏•‡∏∏‡πà‡∏°',
          count: 25,
          ageInfo: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
          gender: '‡∏ú‡∏™‡∏°',
          beacon: 'TAG003-027',
          checkIn: '08:45',
          checkOut: '-'
        },
        {
          id: 4,
          type: 'group',
          name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡∏™‡∏°‡∏¥‡∏ó',
          dataType: '‡∏Å‡∏•‡∏∏‡πà‡∏°',
          count: 5,
          ageInfo: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß',
          gender: '‡∏ú‡∏™‡∏°',
          beacon: 'TAG028-032',
          checkIn: '11:20',
          checkOut: '-'
        }
      ];

      const tableBody = document.getElementById('visitorsTable');
      tableBody.innerHTML = '';

      sampleData.forEach(visitor => {
        const row = `
          <tr>
            <td>${visitor.id}</td>
            <td>${visitor.name}</td>
            <td>${visitor.dataType}</td>
            <td>${visitor.count}</td>
            <td>${visitor.ageInfo}</td>
            <td>${visitor.gender}</td>
            <td>${visitor.beacon}</td>
            <td>${visitor.checkIn}</td>
            <td>${visitor.checkOut}</td>
            <td>
              <button class="btn-edit" onclick="editVisitor(${visitor.id})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
              <button class="btn-danger" onclick="deleteVisitor(${visitor.id})">‡∏•‡∏ö</button>
            </td>
          </tr>
        `;
        tableBody.innerHTML += row;
      });
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    document.addEventListener('DOMContentLoaded', function () {
      loadVisitors();
    });

    document.addEventListener("DOMContentLoaded", function () {
      const firstname = localStorage.getItem("firstname");
      const lastname = localStorage.getItem("lastname");
      const role = localStorage.getItem("role");
      const loginTime = localStorage.getItem("loginTime");

      if (firstname && lastname) {
        document.getElementById("profileName").textContent = `‡∏Ñ‡∏∏‡∏ì${firstname} ${lastname}`;
      }

      if (role) {
        const roleText = {
          admin: "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",
          manager: "‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£",
          staff: "‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà"
        };
        document.getElementById("profileRole").textContent = roleText[role] || "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
      }

      if (loginTime) {
        document.getElementById("sidebarLoginTime").textContent = `‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö: ${loginTime}`;
      }
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô logout
    function logout() {
      localStorage.clear();
      window.location.href = '../login.html';
    }
  </script>
</body>

</html>
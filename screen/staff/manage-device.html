<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SIRIN MUSEUM - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</title>
    <link rel="stylesheet" href="../../assets/css/sidebar.css" />
    <link rel="stylesheet" href="../../assets/css/visitor-register.css" />
    <link rel="stylesheet" href="../../assets/css/manage_device.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard-layout active">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>SIRIN MUSEUM</h2>
                <div class="role">STAFF</div>
            </div>

            <div class="user-profile">
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-name" id="profileName">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</div>
                <div class="profile-role" id="profileRole">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå</div>
                <div class="profile-time" id="sidebarLoginTime">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö: --:--</div>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link" href="visitor-register.html">
                        üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="register-device.html">
                        üìü ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="manage-device.html">
                        üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
                    </a>
                </li>
            </ul>

            <button class="logout-btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Content Header -->
            <div class="content-header">
                <div class="content-left">
                    <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h1>
                    <p>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</p>
                </div>
            </div>

            <!-- Search Form -->
            <div class="form-container">
                <h2 style="margin-bottom: 20px; color: #2a8c78;">
                    üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
                </h2>

                <div class="form-grid">
                    <!-- Dropdown: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å -->
                    <div class="form-group">
                        <label for="searchType">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å</label>
                        <select id="searchType">
                            <option value="name">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</option>
                            <option value="beacon">‡∏£‡∏´‡∏±‡∏™ iBeacon Tag</option>
                            <option value="group">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</option>
                        </select>
                    </div>

                    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô -->
                    <div class="form-group">
                        <label for="searchValue">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</label>
                        <input type="text" id="searchValue" list="visitorList" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤">
                        <datalist id="visitorList"></datalist>
                    </div>
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
                <button class="btn" onclick="searchVisitors()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
            </div>


            <!-- Dashboard Stats -->
            <div class="dashboard-grid">
                <!-- Tag ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
                <div class="card totalRegister-card dashboard-filter" data-filter="registered">
                    <div class="card-header">
                        <div class="card-icon">üìä</div>
                        <h3 class="card-title">Tag ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    </div>
                    <div class="stat-number" id="totalRegisterCount">0</div>
                    <div class="stat-label">‡∏ä‡∏∏‡∏î</div>
                </div>

                <!-- Tag ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
                <div class="card total-card dashboard-filter" data-filter="in_use">
                    <div class="card-header">
                        <div class="card-icon">üìä</div>
                        <h3 class="card-title">Tag ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    </div>
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">‡∏ä‡∏∏‡∏î</div>
                </div>

                <!-- ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß -->
                <div class="card returned-card dashboard-filter" data-filter="returned">
                    <div class="card-header">
                        <div class="card-icon">‚úÖ</div>
                        <h3 class="card-title">‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß</h3>
                    </div>
                    <div class="stat-number" id="returnedCount">0</div>
                    <div class="stat-label">‡∏ä‡∏∏‡∏î</div>
                </div>

                <!-- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô -->
                <div class="card active-card dashboard-filter" data-filter="not_returned">
                    <div class="card-header">
                        <div class="card-icon">‚è≥</div>
                        <h3 class="card-title">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô</h3>
                    </div>
                    <div class="stat-number" id="activeCount">0</div>
                    <div class="stat-label">‡∏ä‡∏∏‡∏î</div>
                </div>
            </div>

            <!-- Device Table -->
            <div class="table-container">
                <!-- Filter Bar (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô visitor-register.html) -->
                <div class="filter-bar">
                    <label for="deviceTypeFilter">‡πÅ‡∏™‡∏î‡∏á</label>
                    <select id="deviceTypeFilter" onchange="applyDeviceFilter()">
                        <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        <option value="individual">‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</option>
                        <option value="group">‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°</option>
                    </select>
                </div>

                <!-- Table -->
                <table class="table">
                    <thead id="deviceTableHead"></thead>
                    <tbody id="deviceTableBody">
                        <tr>
                            <td colspan="7" class="no-data">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../../assets/js/manage-device.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            applyDeviceFilter();
        });
        
        // ‚úÖ Event: ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏´‡∏•‡∏î suggestion
        document.getElementById('searchValue').addEventListener('input', e => {
            if (e.target.value.length > 1) updateDatalist(e.target.value);
        });
    </script>
</body>

</html>